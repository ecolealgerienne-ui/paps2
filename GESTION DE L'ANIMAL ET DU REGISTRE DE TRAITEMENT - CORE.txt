# üìë DOCUMENT DE SP√âCIFICATIONS TECHNIQUES
## MODULE : GESTION DE L'ANIMAL ET DU REGISTRE DE TRAITEMENT (CORE)

---

## PARTIE I : MOD√àLE DE L'ENTIT√â ANIMAL (`ANIMALS`)

Cette table contient les informations statiques et semi-statiques de base n√©cessaires √† l'identification de chaque individu de l'√©levage.

## PARTIE II : HISTORIQUE DE STATUT CRITIQUE (`ANIMAL_STATUS_HISTORY`)

Les r√®gles de s√©curit√© d√©pendent souvent du statut physiologique (gestation, lactation) et du poids r√©cent. Ces informations √©tant dynamiques, elles n√©cessitent une table d'historique.

| Champ | Type | Obligatoire | Description | R√¥le pour l'Application |
| :--- | :--- | :--- | :--- | :--- |
| `Status_History_ID` | PK | Oui | - | Cl√© primaire. |
| `Animal_ID` | FK | Oui | Lien vers l'animal concern√©. | - |
| **`Status_Type`** | Enum | Oui | Nature du statut (POIDS, GESTATION, LACTATION, V√âTO_CHECK). | Permet de filtrer l'historique. |
| **`Start_Date`** | Date | Oui | Date √† laquelle le statut a √©t√© enregistr√© (ex: date du dernier pesage). | R√©f√©rence temporelle. |
| `End_Date` | Date | Non | Date de fin du statut (ex: date de mise bas pour la gestation). | Permet de clore la p√©riode d'alerte. |
| **`Value`** | Texte/D√©cimal | Oui | Valeur associ√©e (ex: `650.5` pour le poids, `Confirm√©e` pour la gestation). | D√©clenche les alertes et les calculs. |

### üö® Alerte Contre-Indication

C'est cette table qui permet de g√©n√©rer des **alertes proactives**. Exemple de logique m√©tier :

> *SI une `TRANSACTION` utilise un produit marqu√© comme Contre-Indiqu√© en Gestation **ET** que `ANIMAL_STATUS_HISTORY` indique `Gestation = Confirm√©e` sans `End_Date` pour l'animal, ALORS d√©clencher une alerte de s√©curit√©.*

---

## PARTIE III : REGISTRE DES TRANSACTIONS Traitement/vaccination

C'est le c≈ìur du syst√®me de tra√ßabilit√©, l'enregistrement de l'acte d'intervention. Il agr√®ge les informations des protocoles et des lots.

Avec l'ajout de :
Product_Lot_ID
Quantity_Administered
Quantit√© de la Dose


### üö® Alerte de Sortie (Le D√©gagement de Responsabilit√©)

La puissance de ce mod√®le r√©side dans l'alerte de sortie :

> *L'√©leveur essaie de changer le `Status` de l'animal √† `Vendu` ou `Abattu`.*
> *SI **`Is_Withdrawal_Active`** est Vrai, ALORS le syst√®me affiche une alerte avec la date de fin de d√©lai (`Calculated_Withdrawal_End`).*
Ceci garantit que le syst√®me met un veto r√©glementaire sur les mouvements ill√©gaux, prot√©geant l'√©leveur (et la plateforme) des sanctions.

