# =============================================================================
# AniTra Backend - Environment Variables (Example)
# =============================================================================
#
# Copy this file to .env for local development
# DO NOT commit .env to git
#

# =============================================================================
# MODE
# =============================================================================
# MVP_MODE=true  : Development mode (no JWT, fake auth, permissive CORS)
# MVP_MODE=false : Production mode (JWT required, strict validation)
MVP_MODE=true

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL="postgresql://anitra:anitra123@localhost:5432/anitra?schema=public"

# =============================================================================
# AUTHENTICATION (Production only - not used when MVP_MODE=true)
# =============================================================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=1h

# =============================================================================
# CORS (Production only)
# =============================================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,https://app.anitra.dz

# =============================================================================
# LOGGING
# =============================================================================
# Toggle debug logs (default: false in production)
LOG_DEBUG=true
# Toggle audit logs (default: always true)
LOG_AUDIT=true
# Toggle error logs (default: always true)
LOG_ERROR=true

# =============================================================================
# SERVER
# =============================================================================
PORT=3000
NODE_ENV=development

# =============================================================================
# FEATURES CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Enable/disable rate limiting (useful to disable for seed scripts)
RATE_LIMIT_ENABLED=true

# Short-term rate limit (1 second window)
RATE_LIMIT_SHORT_TTL=1000
RATE_LIMIT_SHORT_LIMIT=50      # Production: 50, Development: 1000

# Medium-term rate limit (10 seconds window)
RATE_LIMIT_MEDIUM_TTL=10000
RATE_LIMIT_MEDIUM_LIMIT=200    # Production: 200, Development: 5000

# Long-term rate limit (1 minute window)
RATE_LIMIT_LONG_TTL=60000
RATE_LIMIT_LONG_LIMIT=500      # Production: 500, Development: 30000

# -----------------------------------------------------------------------------
# HTTP Logging
# -----------------------------------------------------------------------------
# Log all HTTP requests/responses (useful for debugging)
HTTP_LOGGING_ENABLED=false
HTTP_LOG_REQUEST_BODY=false
HTTP_LOG_RESPONSE_BODY=false

# -----------------------------------------------------------------------------
# Compression
# -----------------------------------------------------------------------------
# Enable gzip compression for responses
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6            # 1-9 (6 is balanced)

# -----------------------------------------------------------------------------
# Request ID Tracking
# -----------------------------------------------------------------------------
# Track requests with unique IDs for debugging
REQUEST_ID_ENABLED=true
REQUEST_ID_HEADER=X-Request-ID

# -----------------------------------------------------------------------------
# Health Check
# -----------------------------------------------------------------------------
# Enable /health and /health/ready endpoints
HEALTH_CHECK_ENABLED=true

# -----------------------------------------------------------------------------
# Request Timeout
# -----------------------------------------------------------------------------
# Enable request timeout to prevent long-running requests
REQUEST_TIMEOUT_ENABLED=false
REQUEST_TIMEOUT_MS=30000       # 30 seconds

# -----------------------------------------------------------------------------
# XSS Protection
# -----------------------------------------------------------------------------
# Filter HTML/JS in inputs (enabled in production by default)
XSS_PROTECTION_ENABLED=true

# -----------------------------------------------------------------------------
# Metrics
# -----------------------------------------------------------------------------
# Enable Prometheus metrics endpoint
METRICS_ENABLED=false
METRICS_PATH=/metrics
